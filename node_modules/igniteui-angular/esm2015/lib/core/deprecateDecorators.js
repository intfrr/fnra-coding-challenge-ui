import { isDevMode } from '@angular/core';
/**
 * @hidden
 */
export function DeprecateClass(message) {
    let isMessageShown = false;
    return function (originalClass) {
        return class extends originalClass {
            constructor(...args) {
                const target = originalClass;
                const targetName = typeof target === 'function' ? target.name : target.constructor.name;
                isMessageShown = showMessage(`${targetName}: ${message}`, isMessageShown);
                super(...args);
            }
        };
    };
}
/**
 * @hidden
 */
export function DeprecateMethod(message) {
    let isMessageShown = false;
    return function (target, key, descriptor) {
        if (descriptor && descriptor.value) {
            const originalMethod = descriptor.value;
            descriptor.value = function () {
                const targetName = typeof target === 'function' ? target.name : target.constructor.name;
                isMessageShown = showMessage(`${targetName}.${key}: ${message}`, isMessageShown);
                return originalMethod.call(this, arguments);
            };
            return descriptor;
        }
    };
}
/**
 * @hidden
 */
export function DeprecateProperty(message) {
    return function (target, key) {
        let isMessageShown = false;
        const messageToDisplay = `${target.constructor.name}.${key}: ${message}`;
        // if the target already has the property defined
        const originalDescriptor = Object.getOwnPropertyDescriptor(target, key);
        if (originalDescriptor) {
            let getter, setter;
            getter = originalDescriptor.get;
            setter = originalDescriptor.set;
            if (getter) {
                originalDescriptor.get = function () {
                    isMessageShown = showMessage(messageToDisplay, isMessageShown);
                    return getter.call(this);
                };
            }
            if (setter) {
                originalDescriptor.set = function (value) {
                    isMessageShown = showMessage(messageToDisplay, isMessageShown);
                    setter.call(this, value);
                };
            }
            return originalDescriptor;
        }
        // the target doesn't contain a descriptor for that property, so create one
        // use backing field to set/get the value of the property to ensure there won't be infinite recursive calls
        const newKey = generateUniqueKey(target, key);
        Object.defineProperty(target, key, {
            configurable: true,
            enumerable: true,
            set: function (value) {
                isMessageShown = showMessage(messageToDisplay, isMessageShown);
                this[newKey] = value;
            },
            get: function () {
                isMessageShown = showMessage(messageToDisplay, isMessageShown);
                return this[newKey];
            }
        });
    };
}
/**
 * @hidden
 */
function generateUniqueKey(target, key) {
    let newKey = '_' + key;
    while (target.hasOwnProperty(newKey)) {
        newKey = '_' + newKey;
    }
    return newKey;
}
/**
 * @hidden
 */
export function showMessage(message, isMessageShown) {
    if (!isMessageShown && isDevMode()) {
        console.warn(message);
    }
    return true;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVwcmVjYXRlRGVjb3JhdG9ycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2lnbml0ZXVpLWFuZ3VsYXIvc3JjL2xpYi9jb3JlL2RlcHJlY2F0ZURlY29yYXRvcnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUUxQzs7R0FFRztBQUNILE1BQU0sVUFBVSxjQUFjLENBQUMsT0FBZTtJQUMxQyxJQUFJLGNBQWMsR0FBRyxLQUFLLENBQUM7SUFFM0IsT0FBTyxVQUErQyxhQUFnQjtRQUNsRSxPQUFPLEtBQU0sU0FBUSxhQUFhO1lBQzlCLFlBQVksR0FBRyxJQUFJO2dCQUNmLE1BQU0sTUFBTSxHQUFRLGFBQWEsQ0FBQztnQkFDbEMsTUFBTSxVQUFVLEdBQUcsT0FBTyxNQUFNLEtBQUssVUFBVSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQztnQkFDeEYsY0FBYyxHQUFHLFdBQVcsQ0FBQyxHQUFHLFVBQVUsS0FBSyxPQUFPLEVBQUUsRUFBRSxjQUFjLENBQUMsQ0FBQztnQkFFMUUsS0FBSyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7WUFDbkIsQ0FBQztTQUNKLENBQUM7SUFDTixDQUFDLENBQUM7QUFDTixDQUFDO0FBRUQ7O0dBRUc7QUFDSCxNQUFNLFVBQVUsZUFBZSxDQUFDLE9BQWU7SUFDM0MsSUFBSSxjQUFjLEdBQUcsS0FBSyxDQUFDO0lBRTNCLE9BQU8sVUFBVSxNQUFXLEVBQUUsR0FBVyxFQUFFLFVBQThCO1FBQ3JFLElBQUksVUFBVSxJQUFJLFVBQVUsQ0FBQyxLQUFLLEVBQUU7WUFDaEMsTUFBTSxjQUFjLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQztZQUV4QyxVQUFVLENBQUMsS0FBSyxHQUFHO2dCQUNmLE1BQU0sVUFBVSxH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RUFBRSxjQUF1QjtJQUNoRSxJQUFJLENBQUMsY0FBYyxJQUFJLFNBQVMsRUFBRSxFQUFFO1FBQ2hDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7S0FDekI7SUFFRCxPQUFPLElBQUksQ0FBQztBQUNoQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNEZXZNb2RlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgZnVuY3Rpb24gRGVwcmVjYXRlQ2xhc3MobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgbGV0IGlzTWVzc2FnZVNob3duID0gZmFsc2U7XG5cbiAgICByZXR1cm4gZnVuY3Rpb248VCBleHRlbmRzIG5ldyguLi5hcmdzOiBhbnlbXSkgPT4ge30gPihvcmlnaW5hbENsYXNzOiBUKSB7XG4gICAgICAgIHJldHVybiBjbGFzcyBleHRlbmRzIG9yaWdpbmFsQ2xhc3Mge1xuICAgICAgICAgICAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldDogYW55ID0gb3JpZ2luYWxDbGFzcztcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXROYW1lID0gdHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJyA/IHRhcmdldC5uYW1lIDogdGFyZ2V0LmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgICAgICAgICAgaXNNZXNzYWdlU2hvd24gPSBzaG93TWVzc2FnZShgJHt0YXJnZXROYW1lfTogJHttZXNzYWdlfWAsIGlzTWVzc2FnZVNob3duKTtcblxuICAgICAgICAgICAgICAgIHN1cGVyKC4uLmFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgZnVuY3Rpb24gRGVwcmVjYXRlTWV0aG9kKG1lc3NhZ2U6IHN0cmluZyk6IE1ldGhvZERlY29yYXRvciB7XG4gICAgbGV0IGlzTWVzc2FnZVNob3duID0gZmFsc2U7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldDogYW55LCBrZXk6IHN0cmluZywgZGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yKSB7XG4gICAgICAgIGlmIChkZXNjcmlwdG9yICYmIGRlc2NyaXB0b3IudmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsTWV0aG9kID0gZGVzY3JpcHRvci52YWx1ZTtcblxuICAgICAgICAgICAgZGVzY3JpcHRvci52YWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXROYW1lID0gdHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJyA/IHRhcmdldC5uYW1lIDogdGFyZ2V0LmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgICAgICAgICAgaXNNZXNzYWdlU2hvd24gPSBzaG93TWVzc2FnZShgJHt0YXJnZXROYW1lfS4ke2tleX06ICR7bWVzc2FnZX1gLCBpc01lc3NhZ2VTaG93bik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxNZXRob2QuY2FsbCh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlc2NyaXB0b3I7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIERlcHJlY2F0ZVByb3BlcnR5KG1lc3NhZ2U6IHN0cmluZyk6IFByb3BlcnR5RGVjb3JhdG9yIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odGFyZ2V0OiBhbnksIGtleTogc3RyaW5nKSB7XG4gICAgICAgIGxldCBpc01lc3NhZ2VTaG93biA9IGZhbHNlO1xuICAgICAgICBjb25zdCBtZXNzYWdlVG9EaXNwbGF5ID0gYCR7dGFyZ2V0LmNvbnN0cnVjdG9yLm5hbWV9LiR7a2V5fTogJHttZXNzYWdlfWA7XG5cbiAgICAgICAgLy8gaWYgdGhlIHRhcmdldCBhbHJlYWR5IGhhcyB0aGUgcHJvcGVydHkgZGVmaW5lZFxuICAgICAgICBjb25zdCBvcmlnaW5hbERlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KTtcbiAgICAgICAgaWYgKG9yaWdpbmFsRGVzY3JpcHRvcikge1xuICAgICAgICAgICAgbGV0IGdldHRlciwgc2V0dGVyO1xuICAgICAgICAgICAgZ2V0dGVyID0gb3JpZ2luYWxEZXNjcmlwdG9yLmdldDtcbiAgICAgICAgICAgIHNldHRlciA9IG9yaWdpbmFsRGVzY3JpcHRvci5zZXQ7XG5cbiAgICAgICAgICAgIGlmIChnZXR0ZXIpIHtcbiAgICAgICAgICAgICAgICBvcmlnaW5hbERlc2NyaXB0b3IuZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzTWVzc2FnZVNob3duID0gc2hvd01lc3NhZ2UobWVzc2FnZVRvRGlzcGxheSwgaXNNZXNzYWdlU2hvd24pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0dGVyLmNhbGwodGhpcyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNldHRlcikge1xuICAgICAgICAgICAgICAgIG9yaWdpbmFsRGVzY3JpcHRvci5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNNZXNzYWdlU2hvd24gPSBzaG93TWVzc2FnZShtZXNzYWdlVG9EaXNwbGF5LCBpc01lc3NhZ2VTaG93bik7XG4gICAgICAgICAgICAgICAgICAgIHNldHRlci5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxEZXNjcmlwdG9yO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGhlIHRhcmdldCBkb2Vzbid0IGNvbnRhaW4gYSBkZXNjcmlwdG9yIGZvciB0aGF0IHByb3BlcnR5LCBzbyBjcmVhdGUgb25lXG4gICAgICAgIC8vIHVzZSBiYWNraW5nIGZpZWxkIHRvIHNldC9nZXQgdGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSB0byBlbnN1cmUgdGhlcmUgd29uJ3QgYmUgaW5maW5pdGUgcmVjdXJzaXZlIGNhbGxzXG4gICAgICAgIGNvbnN0IG5ld0tleSA9IGdlbmVyYXRlVW5pcXVlS2V5KHRhcmdldCwga2V5KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCB7XG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlzTWVzc2FnZVNob3duID0gc2hvd01lc3NhZ2UobWVzc2FnZVRvRGlzcGxheSwgaXNNZXNzYWdlU2hvd24pO1xuICAgICAgICAgICAgICAgIHRoaXNbbmV3S2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaXNNZXNzYWdlU2hvd24gPSBzaG93TWVzc2FnZShtZXNzYWdlVG9EaXNwbGF5LCBpc01lc3NhZ2VTaG93bik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbbmV3S2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlVW5pcXVlS2V5KHRhcmdldDogYW55LCBrZXk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgbGV0IG5ld0tleSA9ICdfJyArIGtleTtcbiAgICB3aGlsZSAodGFyZ2V0Lmhhc093blByb3BlcnR5KG5ld0tleSkpIHtcbiAgICAgICAgbmV3S2V5ID0gJ18nICsgbmV3S2V5O1xuICAgIH1cblxuICAgIHJldHVybiBuZXdLZXk7XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgZnVuY3Rpb24gc2hvd01lc3NhZ2UobWVzc2FnZTogc3RyaW5nLCBpc01lc3NhZ2VTaG93bjogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgIGlmICghaXNNZXNzYWdlU2hvd24gJiYgaXNEZXZNb2RlKCkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xufVxuIl19